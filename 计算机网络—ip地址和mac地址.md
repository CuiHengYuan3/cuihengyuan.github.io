##                           计算机网络—ip地址和mac地址

#### IP地址和CIDR

IP 地址是一个网卡在网络世界的通讯地址，相当于我们现实世界的门牌号码，可以用ip地址找到你。

既然是门牌号码，不能大家都一样，不然就会起冲突。

比如：10.100.122.2 就是一个 IP 地址。这个地址被点分隔为四个部分，每个部分 8 个 bit，所以 IP 地址总共是 32 位。但是这样产生的 IP 地址的数量很快就不够用了。因为当时设计 IP 地址的时候，并没有考虑到未来计算机会发展到如此之多，因为不够用，于是就有了 IPv6，IPv6有 128 位来表示地址，现在看来是够了。

本来 32 位的 IP 地址就不够，竟然还被分成了 5 类。
 ![img](https://static001.geekbang.org/resource/image/0b/9e/0b32d6e35ff0bbc5d46cfb87f6669d9e.jpg) 

地址中，对于 A、B、 C 类主要分两部分，前面一部分是网络号，后面一部分是主机号。这很好理解，大家都是六单元 1001 号，我是小区 A 的六单元 1001 号，而你是小区 B 的六单元 1001 号。

下面看看每种ip的最大主机数量，主机号的位数决定了最大主机数。![img](https://static001.geekbang.org/resource/image/e9/be/e9c59a4b2f0b804356759b10440ea7be.jpg) 
可以看出，C类的太少了，B类又太多了，254太少了就不够，65534太多了就浪费了，一个公司不可能有这么多的计算机。为了解决这个问题，就有了CIDR。

#### 无类型域间选路（CIDR）

一个折中的方式叫作无类型域间选路，简称CIDR。这种方式打破了原来设计的几类地址的做法，将 32 位的 IP 地址一分为二，前面是网络号，后面是主机号。比如：10.100.122.2/24，这个 IP 地址中有一个斜杠，斜杠后面有个数字 24。这种地址表示形式，就是 CIDR。后面 24 的意思是，32 位中，前 24 位是网络号，后 8 位是主机号。

伴随着 CIDR 存在的，一个是广播地址，10.100.122.255。如果发送这个地址，所有 10.100.122 网络里面的机器都可以收到。另一个是子网掩码，255.255.255.0。

将子网掩码和 IP 地址按位计算 AND，就可得到网络号。

#### 私有ip和共有ip

 ![img](https://static001.geekbang.org/resource/image/e9/be/e9c59a4b2f0b804356759b10440ea7be.jpg) 

**私有ip是可以重复的，每种ip都有一定范围内的是私有ip。**

平时我们看到的办公室、家里或学校的 IP 地址，一般都是私有 IP 地址段。这些地址允许组织内部的人员自己管理、自己分配，而且可以重复。

这就像每个小区有自己的楼编号和门牌号，你们小区可以叫 6 栋，我们小区也叫 6 栋，没有任何问题。但是一旦出了小区，就需要使用公有 IP 地址。


#### MAC地址

MAC 地址容易让人误解。因为 MAC 地址号称全局唯一，不会有两个网卡有相同的 MAC 地址，而且网卡自生产出来，就带着这个地址。那么既然这样的话，整个互联网的通信，全部用 MAC 地址好了，只要知道了对方的 MAC 地址，就可以把信息传过去。

**这样当然是不行的。** **一个网络包要从一个地方传到另一个地方，除了要有确定的地址，还需要有定位功能。 而有门牌号码属性的 IP 地址，才是有远程定位功能的。**

mac地址是从硬件层面的唯一，网卡一生产出来就带有的唯一标示，我的理解就是，它有在小范围内的定位功能，比如在同一个公司内找一个公司的员工是可以的，但是远程定位不行，远程定位需要ip地址。
**mac地址就像身份证，它当然是一个人的唯一标示，但是你不能用身份证来去见到一个人吧，去找一个人应该是去找那个人的城市，再是区域，再是街道，一步步找到这个人。而这个就是ip地址功能。**

